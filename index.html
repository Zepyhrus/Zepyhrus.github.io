<!DOCTYPE html>





<html class="theme-next mist use-motion" lang="en">
<head>
  <meta charset="UTF-8">
<meta name="generator" content="Hexo 3.9.0">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.3.0">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.3.0">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.3.0">
  <link rel="mask-icon" href="/images/logo.svg?v=7.3.0" color="#222">

<link rel="stylesheet" href="/css/main.css?v=7.3.0">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '7.3.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    save_scroll: false,
    copycode: {"enable":false,"show_result":false,"style":null},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: 'Copy',
      copy_success: 'Copied',
      copy_failure: 'Copy failed'
    }
  };
</script>

  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo">
  <link rel="canonical" href="http://yoursite.com/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false,
    isPage: false,
    isArchive: false
  };
</script>

  <title>Hexo</title>
  








  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  <div class="container sidebar-position-left">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Hexo</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
      
      
      
        
        <li class="menu-item menu-item-home">
      
    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>Home</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-archives">
      
    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Archives</a>

  </li>
  </ul>

    

</nav>
</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content page-home">
            
  <section id="posts" class="posts-expand">
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/10/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zepyhrus">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2019/09/10/hello-world/" class="post-title-link" itemprop="url">Hello World</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 2019-09-10 19:26:13" itemprop="dateCreated datePublished" datetime="2019-09-10T19:26:13+08:00">2019-09-10</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-08-14 17:15:45" itemprop="dateModified" datetime="2019-08-14T17:15:45+08:00">2019-08-14</time>
              </span>
            
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>

          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/06/Python-Notes/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zepyhrus">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2019/09/06/Python-Notes/" class="post-title-link" itemprop="url">Python Notes</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 2019-09-06 13:05:07" itemprop="dateCreated datePublished" datetime="2019-09-06T13:05:07+08:00">2019-09-06</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-09-09 09:25:30" itemprop="dateModified" datetime="2019-09-09T09:25:30+08:00">2019-09-09</time>
              </span>
            
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="Python-Notes"><a href="#Python-Notes" class="headerlink" title="Python Notes"></a>Python Notes</h1><p>This is the place to take some regular notes for python.</p>
<h2 id="Numpy"><a href="#Numpy" class="headerlink" title="Numpy"></a>Numpy</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numpy.unique(ar, return_index=<span class="literal">False</span>, return_inverse=<span class="literal">False</span>, return_counts=<span class="literal">False</span>, axis=<span class="literal">None</span>)</span><br></pre></td></tr></table></figure>

<h2 id="Pandas"><a href="#Pandas" class="headerlink" title="Pandas"></a>Pandas</h2>
          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/27/CPP-Primer-Chapter-4-Expressions/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zepyhrus">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2019/08/27/CPP-Primer-Chapter-4-Expressions/" class="post-title-link" itemprop="url">CPP Primer Chapter 4: Expressions</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 2019-08-27 09:18:11" itemprop="dateCreated datePublished" datetime="2019-08-27T09:18:11+08:00">2019-08-27</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-09-06 14:51:34" itemprop="dateModified" datetime="2019-09-06T14:51:34+08:00">2019-09-06</time>
              </span>
            
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="Expressions"><a href="#Expressions" class="headerlink" title="Expressions"></a>Expressions</h1><h2 id="4-1-Fundamentals"><a href="#4-1-Fundamentals" class="headerlink" title="4.1 Fundamentals"></a>4.1 Fundamentals</h2><p>There ar both <em>unary operators</em> and <em>binary operators</em>.</p>
<ol>
<li>Unary operators: address-of (&amp;) and dereference (*), act on one operand;</li>
<li>Binary operators: equality (==) and multiplication (*), act on two operands;</li>
<li>Tenrary operator: takes three operands;</li>
<li>Function call: takes unlimited number of operands;</li>
</ol>
<p><strong>Operand Conversions</strong>: The small integral type operands (e.g., <code>bool</code>, <code>char</code>, <code>short</code>, etc) are generally <strong>promoted</strong> to a larger integraltype, typically int.</p>
<p><strong>Overloaded Operators</strong>:The IO library &gt;&gt; and &lt;&lt; operators we used with <code>strings</code>, <code>vectors</code>, and iterators are all overloaded operators.</p>
<p><strong>Lvalue and Rvalue</strong>: Iherited from C. Some lvalues, such as <code>const</code> objects, may not be the left-hand operand of an assignment. Moreover, some expression yield objects but return them as rvalues, not lvalues.</p>
<p>Roughly speaking:</p>
<ul>
<li>When we use an object as an rvalue, we use the object`s value (its content);</li>
<li>When we use an object as an lvalue, we use the object’s identity (its location in memory);</li>
</ul>
<p><strong>Important</strong>: We can use an lvalue when an rvalue is required, but we ccannot use an rvalue when an lvalue (i.e.., a location) is required.</p>
<ul>
<li>Assignment requiers a lvalue as itts left-hand operand and yields its left-hand operand as an lvalue;</li>
<li>The address-of operator requiers an lvalue operand and returns a pointer to its operand as an rvalue;</li>
<li>The built-in dereferenect and subscript operators and the iterator dereference and <code>string</code> and <code>vector</code> subscript operators all yield lvalues;</li>
<li>The built-in and iterator increment and decrement operators require lvalue operands and the prefix versions also yield lvalues.</li>
<li>When we apply <code>decltype</code> to an expression, the result is a reference type if the expression yields an lvalue.</li>
</ul>
<h3 id="4-1-2-Precedence-and-Associativity"><a href="#4-1-2-Precedence-and-Associativity" class="headerlink" title="4.1.2 Precedence and Associativity"></a>4.1.2 Precedence and Associativity</h3><p>Table 4.12 (p. 166) lists all the operators organized into segmentes separated by double lines.</p>
<h3 id="4-1-3-Order-of-Evaluation"><a href="#4-1-3-Order-of-Evaluation" class="headerlink" title="4.1.3 Order of Evaluation"></a>4.1.3 Order of Evaluation</h3><p>In most cases, the order of how the operands are evaluated is largely unspecified. There are four operators that do guarantee the order in which operands are evaluated. </p>
<ul>
<li>The logical AND (&amp;&amp;)  guarantees thta its left-hand operand is evaluated first. It is also guaranteed that the right -hand operand is evaluated only if the left-hand operand is true.</li>
<li>The logical OR (||);</li>
<li>The condition (? :) operator, the tenary operator;</li>
<li>The comma (,) operator;</li>
</ul>
<h2 id="4-3-Logical-and-Relational-Operatiors"><a href="#4-3-Logical-and-Relational-Operatiors" class="headerlink" title="4.3 Logical and Relational Operatiors"></a>4.3 Logical and Relational Operatiors</h2><p><strong>Short-circuit evaluation</strong>: The logical AND and OR operators always evaluate their left operand before the right. Moreover, the right operands is evalutaed <em>if and only if</em> the left operand does not determine the result:</p>
<ul>
<li>The right side of an &amp;&amp; is evalutaed if and only if the left side is true;</li>
<li>The right side of an || is evaluated if and only if the left side is false;</li>
</ul>
<h2 id="4-4-Assignment-Operatiors"><a href="#4-4-Assignment-Operatiors" class="headerlink" title="4.4 Assignment Operatiors"></a>4.4 Assignment Operatiors</h2><p>The left-hand operand of an assignment operator must be a modifiable lvalue.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1024</span> = k;     <span class="comment">// error: literals are rvalues</span></span><br><span class="line">i + j = k;    <span class="comment">// error: arithmetic expressions are rvalues</span></span><br><span class="line">ci = k;       <span class="comment">// error: ci is a const (nonmodifiable) lvalue</span></span><br></pre></td></tr></table></figure>

<p><strong>Assignment Is Right Associative</strong>: Unlike the other binary operators, assignment is right associative.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> i;</span><br><span class="line"><span class="comment">// a better way to write the loop---what the condition does is now clearer</span></span><br><span class="line"><span class="keyword">while</span> ((i = get_value()) != <span class="number">42</span>) &#123;</span><br><span class="line">  <span class="comment">// do something...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Compound Assignment Operators</strong>: There are compound assignments for each of these operators.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">+=    -=    *=    /=    %=;    <span class="comment">// arithmetci operators</span></span><br><span class="line">&lt;&lt;=   &gt;&gt;=   &amp;=    ^=    |=;    <span class="comment">// bitwise operators</span></span><br></pre></td></tr></table></figure>

<p>Each compound operator is essentially equivalent to <code>a = a op b</code>.</p>
<h2 id="4-5-Increment-and-Decrement-Operators"><a href="#4-5-Increment-and-Decrement-Operators" class="headerlink" title="4.5 Increment and Decrement Operators"></a>4.5 Increment and Decrement Operators</h2><p>There are two forms of these operators: prefix and postfix. </p>
<ul>
<li>prefix: increments its operand and yields the <em>changed</em> object as its result;</li>
<li>postfix: yield a copy of the original, <em>unchanged</em> object as its result;</li>
</ul>
<p><strong>Advice</strong>: Use postfix operators only when necessary.</p>
<p><strong>Combinig Dereference and Increment in a Single Expression</strong>: The postfix versions of ++ and – are used when we want to use the current value of a variable and increment it in a single compound expression.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">auto</span> pbeg = v.begin();</span><br><span class="line"><span class="comment">// print elements up to the first negative value</span></span><br><span class="line"><span class="keyword">while</span> (pbeg != v.end() &amp;&amp; *pbeg &gt;= <span class="number">0</span>)</span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; *pbeg++ &lt;&lt; <span class="built_in">endl</span>;  <span class="comment">// print the current value and advance pbeg</span></span><br></pre></td></tr></table></figure>

<p><strong>Remember that operands can be evaluated in any order</strong>: Most operators give no guarantee as to the order in which operands will be evaluated.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// the behavior of the following loop is undefined!</span></span><br><span class="line"><span class="keyword">while</span> (beg != s.end() &amp;&amp; !<span class="built_in">isspace</span>(*beg))</span><br><span class="line">  \*beg = touper(\*beg++);</span><br><span class="line"></span><br><span class="line"><span class="comment">// which could be evaluated as:</span></span><br><span class="line">*beg = <span class="built_in">toupper</span>(\*beg);</span><br><span class="line">*(beg + <span class="number">1</span>) = <span class="built_in">toupper</span>(\*beg);</span><br></pre></td></tr></table></figure>

<p>Or it might evaluate it in yet some other way.</p>

          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/26/CPP-Primer-Chapter-1-Getting-Started/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zepyhrus">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2019/08/26/CPP-Primer-Chapter-1-Getting-Started/" class="post-title-link" itemprop="url">CPP Primer: Chapter 1 Getting Started</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 2019-08-26 11:17:26 / Modified: 11:29:22" itemprop="dateCreated datePublished" datetime="2019-08-26T11:17:26+08:00">2019-08-26</time>
            </span>
          
            

            
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="Cpp-Primer-Notes"><a href="#Cpp-Primer-Notes" class="headerlink" title="Cpp Primer Notes"></a>Cpp Primer Notes</h1><p>This a implementation of some of the exercises from the book: C++ Primer. And also some notes from the book. The github source could be found <a href="https://github.com/Zepyhrus/CPP-Primer" target="_blank" rel="noopener">here</a>.</p>
<h2 id="Prerequisites"><a href="#Prerequisites" class="headerlink" title="Prerequisites"></a>Prerequisites</h2><p>Ubuntu 18.04 LTS<br>gcc/g++: 5.5<br>vscode: 1.35.0, x64</p>
<h2 id="Chapter-1-Getting-Started"><a href="#Chapter-1-Getting-Started" class="headerlink" title="Chapter 1 Getting Started"></a>Chapter 1 Getting Started</h2><h2 id="1-4-Flow-of-control"><a href="#1-4-Flow-of-control" class="headerlink" title="1.4 Flow of control"></a>1.4 Flow of control</h2><h3 id="1-4-1-The-While-statement"><a href="#1-4-1-The-While-statement" class="headerlink" title="1.4.1 The While statement"></a>1.4.1 The <em>While</em> statement</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> b = ++a;  <span class="comment">// a + 1 before assigned to b, cal after a + 1;</span></span><br><span class="line"><span class="keyword">int</span> c = a++;  <span class="comment">// a + 1 after assigned to c, cal before a + 1;</span></span><br></pre></td></tr></table></figure>

<h3 id="1-4-3-Reading-an-Unknown-Number-of-INputs"><a href="#1-4-3-Reading-an-Unknown-Number-of-INputs" class="headerlink" title="1.4.3 Reading an Unknown Number of INputs"></a>1.4.3 Reading an Unknown Number of INputs</h3><ul>
<li>The end of input is CTRL + d;</li>
<li>It is a good practice to recompile the code after each fix – or after making at most a small number of obvious fixes. This is called <em>edit-compile-debug</em>.</li>
<li>exercise at input_if.cc</li>
</ul>
<h2 id="1-5-Introducing-Classes"><a href="#1-5-Introducing-Classes" class="headerlink" title="1.5 Introducing Classes"></a>1.5 Introducing Classes</h2><ol>
<li>Memeber function: a function that is defined as part of a class, sometimes referred to as <strong>methods</strong>;</li>
<li><code>()</code>: the <code>call</code> operator;</li>
</ol>
<ul>
<li>Uninitialized variables are a rich source of bugs;</li>
</ul>

          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/26/CPP-Primer-Chapter-3-String-Vectors-and-Arrays/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zepyhrus">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2019/08/26/CPP-Primer-Chapter-3-String-Vectors-and-Arrays/" class="post-title-link" itemprop="url">CPP Primer: Chapter 3 String, Vectors, and Arrays</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 2019-08-26 11:11:53" itemprop="dateCreated datePublished" datetime="2019-08-26T11:11:53+08:00">2019-08-26</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-08-27 09:07:41" itemprop="dateModified" datetime="2019-08-27T09:07:41+08:00">2019-08-27</time>
              </span>
            
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="Strings-Vectors-And-Arrays"><a href="#Strings-Vectors-And-Arrays" class="headerlink" title="Strings, Vectors, And Arrays"></a>Strings, Vectors, And Arrays</h1><p>The standard library defines a number of additiaonal types of a higher-level nature that computer hardware usually does not implement directly.</p>
<h2 id="3-1-Namespace-using-Declarations"><a href="#3-1-Namespace-using-Declarations" class="headerlink" title="3.1 Namespace using Declarations"></a>3.1 Namespace using Declarations</h2><p><strong>Headers Should Not Include <code>using</code> Declarations</strong>: The contents of a header are copied into the including program’s text. If a header has a <code>using</code> declaration, then it will pollute all scope with such <code>using</code> statement.</p>
<h2 id="3-2-Library-string"><a href="#3-2-Library-string" class="headerlink" title="3.2 Library string"></a>3.2 Library <code>string</code></h2><h3 id="3-2-1-Defining-and-Initializeing-strings"><a href="#3-2-1-Defining-and-Initializeing-strings" class="headerlink" title="3.2.1 Defining and Initializeing strings"></a>3.2.1 Defining and Initializeing <code>strings</code></h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="built_in">string</span> <span class="title">s4</span><span class="params">(<span class="number">10</span>, <span class="string">'c'</span>)</span></span>; <span class="comment">//  s4 is cccccccccc</span></span><br></pre></td></tr></table></figure>

<p><strong>Direct and Copy Forms of Initialization</strong>:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span> s5 = <span class="string">"hiya"</span>; <span class="comment">//  copy initialization</span></span><br><span class="line"><span class="function"><span class="built_in">string</span> <span class="title">s6</span><span class="params">(<span class="string">"hiya"</span>)</span></span>;  <span class="comment">//  direct initialization</span></span><br><span class="line"><span class="function"><span class="built_in">string</span> <span class="title">s7</span><span class="params">(<span class="number">10</span>, <span class="string">'c'</span>)</span></span>; <span class="comment">//  direct initialization</span></span><br></pre></td></tr></table></figure>

<h4 id="3-2-2-Operations-on-strings"><a href="#3-2-2-Operations-on-strings" class="headerlink" title="3.2.2 Operations on strings"></a>3.2.2 Operations on <code>string</code>s</h4><p><strong>Table: String Operations</strong>: On page. 86.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">getline(is, s); <span class="comment">//  Reads a line of input from is into s, returns is.</span></span><br><span class="line">s.empty();      <span class="comment">//</span></span><br><span class="line">s.size();       <span class="comment">//  Returns the number of characters in s</span></span><br><span class="line">s[n];           <span class="comment">//  returns a reference to the char at position n in s.</span></span><br><span class="line">s1 + s2;        <span class="comment">//</span></span><br><span class="line">s1 = s2;        <span class="comment">//</span></span><br><span class="line">s1 == s2;       <span class="comment">//</span></span><br><span class="line">&lt;, &lt;=, &gt;, &gt;=;   <span class="comment">//  Comparisions are case-sensitive and use dictionary ordering</span></span><br></pre></td></tr></table></figure>

<p><strong>Using <code>getline</code> to Read an Entire Line</strong>: if you want to take the input and keep the whitespace in input:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="built_in">string</span> line;</span><br><span class="line">  <span class="keyword">while</span> (getline(<span class="built_in">cin</span>, line))</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; line &lt;&lt; <span class="built_in">endl</span>; <span class="comment">//  we need endl to end the current line and flush the buffer</span></span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>The string::size_type Type</strong>: <code>string::size_type</code> returns a size_type value. If n ins an int that holds a negative value, then s.size() &lt; n will almost surely evaluate as true. It yields true because the negative value in n will convert to a large unsigned value.</p>
<p><strong>Adding Literals and strings</strong>: When we mix strings and string or character literals, at least one operand to each + operator must be of string type.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span> s5 = <span class="string">"hello"</span> + <span class="string">", "</span>;   <span class="comment">//  error: no string operand</span></span><br><span class="line"><span class="built_in">string</span> s7 = <span class="string">"hello"</span> + <span class="string">", "</span> + s2;    <span class="comment">//  error: can't add string literals</span></span><br></pre></td></tr></table></figure>

<h3 id="3-2-3-Dealing-with-the-Characters-in-a-string"><a href="#3-2-3-Dealing-with-the-Characters-in-a-string" class="headerlink" title="3.2.3 Dealing with the Characters in a string"></a>3.2.3 Dealing with the Characters in a string</h3><p><strong>Advice</strong>: Use the C++ version of C Library Headers. Headers in C have names of the form name.h. The C++ version of these headers are named cname–they remove the .h suffix and precede the name with the letterc. The c indicates that the header is part of the C library.<br><code>cctype</code> has the same contents as <code>ctype.h</code>, but in a form that is approprate for C++ programs. In particular, the names defined in the <code>cname</code> headers are defined inside the <code>std</code> namespace, whereas those defined in the .h versions are not.</p>
<p><strong>Note</strong>:</p>
<ul>
<li><code>string.h</code> contains old functions like <code>strcpy</code>, <code>strlen</code> for C style null-terminated strings, use <code>cstring</code> instead.</li>
<li><code>string</code> primarily contains the <code>std::string</code>, <code>std::wstring</code> and other classes.</li>
</ul>
<p><strong>Use Range-Based for to process every Character</strong>: Introduced in C++ 11, while the <code>expression</code> should represent a sequence.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (declaration : expression)</span><br><span class="line">  statement</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="built_in">string</span> <span class="title">str</span><span class="params">(<span class="string">"some string"</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// fprint the characters in str one character to a line</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">auto</span> c : str)</span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; c &lt;&lt; <span class="built_in">endl</span>;</span><br></pre></td></tr></table></figure>

<p>Example code:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="built_in">string</span> <span class="title">s</span><span class="params">(<span class="string">"Hello world!!!"</span>)</span></span>;</span><br><span class="line"><span class="comment">// punct_cunt has the same type that s.size returns;</span></span><br><span class="line"><span class="keyword">decltype</span>(s.size()) punct_cnt = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// count the number of punctutation characters in s</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">auto</span> c : s)</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">ispunct</span>(c))</span><br><span class="line">    ++punct_cnt;</span><br><span class="line"></span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; punct_cnt</span><br><span class="line">  &lt;&lt; <span class="string">" punctiuation characters in "</span> &lt;&lt; s &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">auto</span> &amp;c :s)</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">isalpha</span>(c))</span><br><span class="line">    c = <span class="built_in">toupper</span>(c);</span><br><span class="line"></span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; s &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"><span class="comment">/* cctype Functions</span></span><br><span class="line"><span class="comment">  * isalnum(c): true if c is a letter or a digit</span></span><br><span class="line"><span class="comment">  * isalpha(c): true if c is a letter</span></span><br><span class="line"><span class="comment">  * iscntrl(c): true if c is a control character</span></span><br><span class="line"><span class="comment">  * isdigit(c): true if c is a digit</span></span><br><span class="line"><span class="comment">  * isgraph(c): true if c is not a space but is printable</span></span><br><span class="line"><span class="comment">  * islower(c): true if c is a lowercase letter</span></span><br><span class="line"><span class="comment">  * isprint(c): true if c is a printable character (i.e., a space or a character that has a visible representation)</span></span><br><span class="line"><span class="comment">  * ispunct(c): true if c is a punctutation charcter</span></span><br><span class="line"><span class="comment">  * isspace(c): true if c is a space</span></span><br><span class="line"><span class="comment">  * isupper(c): true if c is an uppercase letter</span></span><br><span class="line"><span class="comment">  * isxdigit(c): true if c is a hexadecimal digit</span></span><br><span class="line"><span class="comment">  * tolower(c): convert c to its lowercase equivalent if c is a letter</span></span><br><span class="line"><span class="comment">  * toupper(c): convert c to its uppercase equivalent if c is a letter</span></span><br><span class="line"><span class="comment">  */</span></span><br></pre></td></tr></table></figure>

<p><strong>Process Only Some Characters</strong>: We can use a subscript or an iterator. Note that the subscript will be converted to unsigned int.</p>
<p><strong>Using a Subscript for Random Access</strong>:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="built_in">string</span> hexdigits = <span class="string">"0123456789ABCDEF"</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">"Enter a series of numbers between 0 and 15"</span></span><br><span class="line">      &lt;&lt; <span class="string">" separated by spaces. Hit ENDTER when finished: "</span></span><br><span class="line">      &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">string</span> result;</span><br><span class="line"></span><br><span class="line"><span class="built_in">string</span>::size_type n;</span><br><span class="line"><span class="keyword">while</span> (<span class="built_in">cin</span> &gt;&gt; n)</span><br><span class="line">  <span class="keyword">if</span> (n &lt; hexdigits.size())</span><br><span class="line">    result += hexdigits[n];</span><br><span class="line"></span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">"Your hex number is: "</span> &lt;&lt; result &lt;&lt; <span class="built_in">endl</span>;</span><br></pre></td></tr></table></figure>

<h2 id="3-3-Library-vector-Type"><a href="#3-3-Library-vector-Type" class="headerlink" title="3.3 Library vector Type"></a>3.3 Library vector Type</h2><p>A vector is a class template. C++ has both class and function templates.The process that the compiler uses to create classees or functions from templates is called <strong>Instantiation</strong>.<br><strong>Note</strong>: vector is a template, not a type. Types generated from vector must include the element type, for example, <code>vector&lt;int&gt;</code>. Some compilers may require the old-style declarations for a vector of vectors, for example, <code>vector&lt;vector&lt;int&gt; &gt;</code>.</p>
<h3 id="3-3-1-Deifining-and-Initializing-vectors"><a href="#3-3-1-Deifining-and-Initializing-vectors" class="headerlink" title="3.3.1 Deifining and Initializing vectors"></a>3.3.1 Deifining and Initializing vectors</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">vector</span>&lt;T&gt; v1;                   <span class="comment">//  vector that holds objects of type T. Default initialization; v1 is empty</span></span><br><span class="line"><span class="built_in">vector</span>&lt;T&gt; v2(v1);               <span class="comment">//  v2 has a copy of each element in v1.</span></span><br><span class="line"><span class="built_in">vector</span>&lt;T&gt; v2 = v1;              <span class="comment">//  Equivalent to v2(v1)</span></span><br><span class="line"><span class="built_in">vector</span>&lt;T&gt; v3(n, val);           <span class="comment">//  v3 has n elements with value val.</span></span><br><span class="line"><span class="built_in">vector</span>&lt;T&gt; v4(n);                <span class="comment">//  v4 has n copipes of a value-initialized object</span></span><br><span class="line"><span class="built_in">vector</span>&lt;T&gt; v5&#123;a, b, c, ...&#125;;     <span class="comment">//  v5 has as manay elements as there are initializers; elements are initialized by corresponding initializers</span></span><br><span class="line"><span class="built_in">vector</span>&lt;T&gt; v5 = &#123;a, b, c, ...&#125;;  <span class="comment">//  Equivalent to v5&#123;a, b, c, ...&#125;</span></span><br></pre></td></tr></table></figure>

<p><strong>Key Concept</strong>: vectors grow efficiently: If differing element values are needed, it is usually more efficient to define an empty vector and add elements as the values we need become known at run time. Moreover, vector offers capabilityes to allow us to further enhance run-time performance when we add elements. Deifne a vector of a specific size could result in poorer performance.</p>
<p><strong>Warning</strong>: The body of a range <code>for</code> must not change the size of the sequence over which it is iterating.</p>
<h3 id="3-3-2-Other-vector-Operations"><a href="#3-3-2-Other-vector-Operations" class="headerlink" title="3.3.2 Other vector Operations"></a>3.3.2 Other vector Operations</h3><p><strong>Warning</strong>: <em>buffer overflow</em> errors are the result of subscripting elements that don`t exst. Such bugs are the most common cause of security problems in PC and other applications.</p>
<h2 id="3-4-Introducing-Iterators"><a href="#3-4-Introducing-Iterators" class="headerlink" title="3.4 Introducing Iterators"></a>3.4 Introducing Iterators</h2><p>All of the library containers have iterators, but only a few of them support the subscript operator. <code>string</code> is not a container, but it supports most of the container operations, <code>string</code> also supports iterators.</p>
<h3 id="3-4-1-Using-Iterators"><a href="#3-4-1-Using-Iterators" class="headerlink" title="3.4.1 Using Iterators"></a>3.4.1 Using Iterators</h3><p>The iterator returned by end is often referred to as the off-the-end iterator or abbreviated as “the <code>end</code> iterator”.</p>
<p><strong>Iterator Operations</strong>: Iterator only supports a few operations.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">*iter;          <span class="comment">// Returns a reference to the element denoted by the iterator iter.</span></span><br><span class="line">iter-&gt;mem;      <span class="comment">// Dereferences iter and fetches the member named mem from the underlying element, Equivalent to (*iter).mem</span></span><br><span class="line">++iter;         <span class="comment">// Increments iter to refer to the next element in the container</span></span><br><span class="line">--iter;         <span class="comment">// Decrements iter to refer to the previous element in the container</span></span><br><span class="line">iter1 == iter2; <span class="comment">//Compares two iterators for equaility. Two iterators are equal if they denote the same element or if they are the off-the-end iterator for the same container</span></span><br></pre></td></tr></table></figure>

<p><strong>MMoving Iterators from One Element to Another</strong>: Because the iterator returned from end does not denote an element, it may not be incremented or dereferenced.</p>
<p><strong>Key Concept: Generic Programming</strong>: Only a few containers have the subscript operator. Most of thoes iterators do not have the &lt; operator. So C++ programmers use <code>!=</code> operator in the loop instead of <code>&lt;</code> operator.</p>
<p><strong>The <code>begin</code> and <code>end</code> Operations</strong>: The default behavior is often not we want, return <code>iterator</code> for vector and <code>const_iterator</code> for const vector, while we usually want <code>const</code> type to read but not to write. It is suggested to use following new functions in new standard.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; v;</span><br><span class="line"></span><br><span class="line"><span class="keyword">auto</span> it3 = v.cbegin();</span><br></pre></td></tr></table></figure>

<h3 id="3-4-2-Iterator-Arithmetic"><a href="#3-4-2-Iterator-Arithmetic" class="headerlink" title="3.4.2 Iterator Arithmetic"></a>3.4.2 Iterator Arithmetic</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">iter + n;         <span class="comment">//</span></span><br><span class="line">iter - n;</span><br><span class="line">iter1 += n;</span><br><span class="line">iter1 -= n;</span><br><span class="line">iter1 - iter2;    <span class="comment">// Substracting 2 iterators yiels the number that when added to the right-hande iterator yelds the left-head iterator.</span></span><br><span class="line"></span><br><span class="line">&gt;, &gt;=, &lt;, &lt;=;     <span class="comment">// One iterator is less than another if it refers to an element that appears in the container before the one referred to by the other iterator.</span></span><br></pre></td></tr></table></figure>

<p><strong>Arithmetic Operations on Iterators</strong>: Compute an iterator te the element nearest the middle of a <code>vector</code>:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">auto</span> mid = vi.begin() + vi.size() / <span class="number">2</span>;</span><br></pre></td></tr></table></figure>

<p><strong>Using Iterator Arithmetic</strong>: A classic algorithm that uses iterator arithmetic is binary search.</p>
<h2 id="3-5-Arrays"><a href="#3-5-Arrays" class="headerlink" title="3.5 Arrays"></a>3.5 Arrays</h2><p>An array is a data structure that is similar to the library <code>vector</code> type but offers a different trade-off between performance and flexibility.</p>
<p>An array is a <strong>compound type</strong>, which is defined based on other type, like reference and pointer.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">unsigned</span> cnt = <span class="number">42</span>;</span><br><span class="line"><span class="keyword">constexpr</span> <span class="keyword">unsigned</span> sz = <span class="number">42</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> arr[<span class="number">10</span>];</span><br><span class="line"><span class="keyword">int</span> *parr[sz];</span><br><span class="line"><span class="built_in">string</span> bad[cnt];</span><br><span class="line"><span class="built_in">string</span> strs[get_size()];</span><br></pre></td></tr></table></figure>

<p>By default, the elements in an array are default initialized. Arrays hold objects, thus , there are no arrays of references.</p>
<p><strong>Explicitly Initializing Array Elements</strong>:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">unsigned</span> sz = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">int</span> ia1[sz] = &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>&#125;;</span><br><span class="line"><span class="keyword">int</span> a2[] = &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>&#125;;</span><br><span class="line"><span class="keyword">int</span> a3[<span class="number">5</span>] = &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>&#125;;    <span class="comment">// equivalent ot a3[] = &#123;0, 1, 2, 0, 0&#125;</span></span><br><span class="line"><span class="built_in">string</span> a4[<span class="number">3</span>] = &#123;<span class="string">"hi"</span>, <span class="string">"bye"</span>&#125;;</span><br><span class="line"><span class="keyword">int</span> a5[<span class="number">2</span>] = &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>&#125;;    <span class="comment">// error: too many arguments</span></span><br></pre></td></tr></table></figure>

<p><strong>Character Arrays Are Special</strong>: String literals end with a null character. That null character is copied into the array along with the characters in the literal.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">char</span> a1[] = &#123;<span class="string">'C'</span>, <span class="string">'+'</span>, <span class="string">'+'</span>&#125;;</span><br><span class="line"><span class="keyword">char</span> a2[] = &#123;<span class="string">'C'</span>, <span class="string">'+'</span>, <span class="string">'+'</span>, <span class="string">'\0'</span>&#125;;    <span class="comment">// list initialization, explicit null</span></span><br><span class="line"><span class="keyword">char</span> a3[] = <span class="string">"C++"</span>;                    <span class="comment">// null termintator added automatically</span></span><br><span class="line"><span class="keyword">char</span> a4[<span class="number">6</span>] = <span class="string">"Daniel"</span>;                <span class="comment">// error: nospace for the null</span></span><br></pre></td></tr></table></figure>

<p><strong>No Copi or Assignment</strong>: We cannot initialize an array as a copi of another array, nor is it legal to assign one array to another.</p>
<p><strong>Complicated Array Declarations</strong>: Read the declaration from inside out and then right to left.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> *ptrs[<span class="number">10</span>];                    <span class="comment">// ptrs is an array of ten pointers to int</span></span><br><span class="line"><span class="keyword">int</span> &amp;refs[<span class="number">10</span>] = <span class="comment">/* ? */</span>;          <span class="comment">// error: no arrays of references</span></span><br><span class="line"><span class="keyword">int</span> (*Parray) [<span class="number">10</span>] = &amp;arr;        <span class="comment">// Parray points to an array of ten ints</span></span><br><span class="line"><span class="keyword">int</span> (&amp;arrRef)[<span class="number">10</span>] = arr;          <span class="comment">// arrRef refers to an array of ten ints</span></span><br><span class="line"><span class="keyword">int</span> *(&amp;arry)[<span class="number">10</span>] = ptrs;          <span class="comment">// arry arry is a reference to an array of ten pointers</span></span><br></pre></td></tr></table></figure>

<h3 id="3-5-2-Accessing-the-Elements-of-an-Array"><a href="#3-5-2-Accessing-the-Elements-of-an-Array" class="headerlink" title="3.5.2 Accessing the Elements of an Array"></a>3.5.2 Accessing the Elements of an Array</h3><p>Nothing much, you should be able to accesss elements in arrays like in vectors.</p>
<h3 id="3-5-3-Pointers-and-Arrays"><a href="#3-5-3-Pointers-and-Arrays" class="headerlink" title="3.5.3 Pointers and Arrays"></a>3.5.3 Pointers and Arrays</h3><p>In C++, when we use an array, the compiler ordinarily converts the array to a pointer. The arrays have a special property–in most places when we use an array, the compiler automatically substitutes a poiter to the first elemet:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span> nums[] = &#123;<span class="string">"one"</span>, <span class="string">"two"</span>, <span class="string">"three"</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">string</span> *p = &amp;nums[<span class="number">0</span>];     <span class="comment">// p points the first element in nums</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">string</span> *p2 = nums;        <span class="comment">// equivalent to p2 = &amp;nums[0]</span></span><br></pre></td></tr></table></figure>

<p><strong>Pointers Are Iterators</strong>: In particular, pointers to array elements support the same operations as iterators on <code>vector</code> or <code>string</code>.</p>
<p><strong>The Libarary <code>begin</code> and <code>end</code> Functions</strong>: <code>begin</code> returns a pointer to the first, and <code>end</code> returns a pointer one past the last element in the given array. These funcgtions are defined in the <code>iterator</code> header.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> ia[] = &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>&#125;;</span><br><span class="line"><span class="keyword">int</span> *beg = begin(ia);</span><br><span class="line"><span class="keyword">int</span> *last = end(ia);</span><br></pre></td></tr></table></figure>

<p><strong>Pointer Arithmetic</strong>: Pointers acn use all the iterator operations.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">constexpr</span> <span class="keyword">size_t</span> sz = <span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> arr[sz] = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line"><span class="keyword">int</span> *ip = arr;                    <span class="comment">// equivalent to int *ip = &amp;arr[0]</span></span><br><span class="line"><span class="keyword">int</span> *ip2 = ip + <span class="number">4</span>;                <span class="comment">// ip2 points to arr[4], the last element in arr</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ok: arr is converted to a pointer to its first element; p points one past the end of arr</span></span><br><span class="line"><span class="keyword">int</span> *p = arr + sz;                <span class="comment">// do not dereference</span></span><br><span class="line"><span class="keyword">int</span> *p2 = arr + <span class="number">10</span>;               <span class="comment">// error: arr has only 5 elements; p2 has undefined value</span></span><br></pre></td></tr></table></figure>

<p>The result of substracting two pointers is a library type named <code>ptrdiff_t</code>. Like <code>size_t</code>, the <code>ptrdiff_t</code> type is a machine-specific type and is defined in the <code>cstddef</code> header.</p>
<p><strong>Interaction between Dereference and Pointer Arithmetic</strong>:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> ia[] = &#123;<span class="number">0</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>&#125;;</span><br><span class="line"><span class="keyword">int</span> last = *(ia + <span class="number">4</span>);</span><br></pre></td></tr></table></figure>

<p><strong>Subscripts and Pointers</strong>: In most places when we use the name of an array, we are really using a pointer to the first element in that array. We can use the subscript operator on any pointer, as long as that pointer points to an element (or one past the last element) in an array.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> *p = &amp;ia[<span class="number">2</span>];      <span class="comment">// p points to the element indexed by 2</span></span><br><span class="line"><span class="keyword">int</span> j = p[<span class="number">1</span>];         <span class="comment">// p[1] is the same element as ia[3]</span></span><br><span class="line"><span class="keyword">int</span> k = p[<span class="number">-2</span>];        <span class="comment">// p[-2] is the same element as ia[0]</span></span><br></pre></td></tr></table></figure>

<p><strong>Warning</strong>: Unlike subscripts for <code>vector</code> and <code>string</code>, the index of the built-in subscript operator is not an <code>unsigned</code> type.</p>
<h3 id="3-5-4-C-Style-Character-Strings"><a href="#3-5-4-C-Style-Character-Strings" class="headerlink" title="3.5.4 C-Style Character Strings"></a>3.5.4 C-Style Character Strings</h3><p><strong>C Library String Functions</strong>: Included in <code>cstring</code> header file.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">strlen</span>(p);        <span class="comment">// Renturns the length of p, not cunting the null</span></span><br><span class="line"><span class="built_in">strcmp</span>(p1, p2);   <span class="comment">// Compares p1 and p2 for equality. Returns 0 if p1 == p2, a positive value if p1 &gt; p2, a negative value if p1 &lt; p2</span></span><br><span class="line"><span class="built_in">strcat</span>(p1, p2);   <span class="comment">// Appends p2 to p1. Returns p1.</span></span><br><span class="line"><span class="built_in">strcpy</span>(p1, p2);   <span class="comment">// Copies p2 into p1. Returns p1.</span></span><br></pre></td></tr></table></figure>

<p><strong>Notes</strong>: Remember that when we are comparing arraies, we are really using a pointer to the first element in the array.</p>
<p><strong>Caller Is Responsible for Size of a Destination String</strong>: For most applications, in addition to being safer, it is also more efficient to use library strings rather than C-style strings.</p>
<h3 id="3-5-5-INterfacing-to-Older-Code"><a href="#3-5-5-INterfacing-to-Older-Code" class="headerlink" title="3.5.5 INterfacing to Older Code"></a>3.5.5 INterfacing to Older Code</h3><p>The <code>string</code> member funciton named <code>c_str</code> that we can often use to accomplish what we want.</p>
<p><strong>Using an Array to Initialize a <code>vector</code></strong>: We cannot initialize a built-in array from another array. But we can, and we only can initialize a <code>vector</code> using an array.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> int_arr[] = &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; ivec(begin(int_arr), end(int_arr));</span><br><span class="line"></span><br><span class="line"><span class="comment">/* create a sub vector */</span></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; sub_vec(int_arr + <span class="number">1</span>, int_arr + <span class="number">4</span>);</span><br></pre></td></tr></table></figure>

<h2 id="3-6-Multidimensional-Arrays"><a href="#3-6-Multidimensional-Arrays" class="headerlink" title="3.6 Multidimensional Arrays"></a>3.6 Multidimensional Arrays</h2><p><strong>Using a Ranf for with Multidimensional Arrays</strong>: The range for loop could be done under the new standard.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">size_t</span> cnt = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">auto</span> &amp;row : ia)</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;col : row)&#123;</span><br><span class="line">    col = cnt;</span><br><span class="line">    ++cnt;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p><strong>Notes</strong>: To use a multidimensional array in a range for, the loop control variable for all but the innermost array must be references.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> *ip[<span class="number">4</span>];     <span class="comment">// array of pointers to int</span></span><br><span class="line"><span class="keyword">int</span> (*ip)[<span class="number">4</span>];   <span class="comment">// pointer to an array of four ints</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// print the value of each element in ia, with each inner array on its own line</span></span><br><span class="line"><span class="comment">// p points to an array of four ints</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">auto</span> p = ia; p != ia + <span class="number">3</span>; ++p) &#123;</span><br><span class="line">  <span class="comment">// q points to the first element of an array of four ints; that is , q points to an int</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">auto</span> q = *p; q != *p + <span class="number">4</span>; ++q)</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; *q &lt;&lt; <span class="string">'\t'</span>;</span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Defined-Terms"><a href="#Defined-Terms" class="headerlink" title="Defined Terms"></a>Defined Terms</h2><ul>
<li>begin/end: included in <code>&lt;iterator&gt;</code>, return the pointers to an array`s begin and end;</li>
<li>buffer overflow: When we use an index that is out-of-range for a container;</li>
<li>difference_type: A <code>signed</code> integral type defined by <code>vector</code> and <code>string</code> that can hold the distance between any two iterators;</li>
<li>ptrdiff_t/size_t: Machine-dependent signed integral type defined in the <code>cstddef</code> header that is large enough to held the difference between 2 pointers into the largest possible array;</li>
</ul>

          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/26/Opencv-Matrix-Operations/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zepyhrus">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2019/08/26/Opencv-Matrix-Operations/" class="post-title-link" itemprop="url">Opencv Matrix Operations</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 2019-08-26 10:23:14" itemprop="dateCreated datePublished" datetime="2019-08-26T10:23:14+08:00">2019-08-26</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-08-27 10:28:25" itemprop="dateModified" datetime="2019-08-27T10:28:25+08:00">2019-08-27</time>
              </span>
            
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="OpenCV-Matrix-Operations"><a href="#OpenCV-Matrix-Operations" class="headerlink" title="OpenCV Matrix Operations"></a>OpenCV Matrix Operations</h1><p>Since OpenCV is the most widely used image processing library, the matrix operation and basic linear algebra is inevidable.</p>
<h2 id="1-Initialization"><a href="#1-Initialization" class="headerlink" title="1. Initialization"></a>1. Initialization</h2><p>Remeber that you have to initialize a Mat from a array.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;opencv2/core/core.hpp&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> cv;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">addMatrixExample</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">float</span> a[<span class="number">2</span>][<span class="number">2</span>] = &#123;&#123;<span class="number">1</span>, <span class="number">2</span>&#125;,</span><br><span class="line">                   &#123;<span class="number">3</span>, <span class="number">4</span>&#125;&#125;;</span><br><span class="line">  <span class="keyword">float</span> b[<span class="number">2</span>][<span class="number">2</span>] = &#123;&#123;<span class="number">5</span>, <span class="number">6</span>&#125;,</span><br><span class="line">                   &#123;<span class="number">7</span>, <span class="number">8</span>&#125;&#125;;</span><br><span class="line"></span><br><span class="line">  Mat A = Mat(<span class="number">2</span>, <span class="number">2</span>, CV_32FC1, a);</span><br><span class="line">  Mat B = Mat(<span class="number">2</span>, <span class="number">2</span>, CV_32FC1, b);</span><br><span class="line">  Mat C;</span><br><span class="line">  C = A + B;</span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">"C ="</span> &lt;&lt; <span class="built_in">endl</span> &lt;&lt; <span class="string">" "</span> &lt;&lt; C &lt;&lt; <span class="built_in">endl</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    addMatrixExample();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-Point"><a href="#2-Point" class="headerlink" title="2. Point"></a>2. Point</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> Point_&lt;<span class="keyword">int</span>&gt; Point2i;</span><br><span class="line"><span class="keyword">typedef</span> Point2i Point;</span><br><span class="line"><span class="keyword">typedef</span> Point_&lt;<span class="keyword">float</span>&gt; Point2f;</span><br><span class="line"><span class="keyword">typedef</span> Point_&lt;<span class="keyword">double</span>&gt; Point2d;</span><br><span class="line"><span class="keyword">typedef</span> Point3_&lt;<span class="keyword">int</span>&gt; Point3i;</span><br><span class="line"><span class="keyword">typedef</span> Point3_&lt;<span class="keyword">float</span>&gt; Point3f;</span><br><span class="line"><span class="keyword">typedef</span> Point3_&lt;<span class="keyword">double</span>&gt; Point3d;</span><br></pre></td></tr></table></figure>

<p>From the above we can see that <code>Point</code>, <code>Point2i</code>, <code>Point_&lt;int&gt;</code> are exactly the same.</p>

          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/23/CPP-Primer-Notes/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zepyhrus">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2019/07/23/CPP-Primer-Notes/" class="post-title-link" itemprop="url">CPP-Primer-Notes</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 2019-07-23 10:05:28" itemprop="dateCreated datePublished" datetime="2019-07-23T10:05:28+08:00">2019-07-23</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-08-26 11:29:29" itemprop="dateModified" datetime="2019-08-26T11:29:29+08:00">2019-08-26</time>
              </span>
            
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="Chapter-2-Varibales-and-Basic-Types"><a href="#Chapter-2-Varibales-and-Basic-Types" class="headerlink" title="Chapter 2 Varibales and Basic Types"></a>Chapter 2 Varibales and Basic Types</h1><p>Some languages, such as Smalltalk and Python, check types at run time. In contrast, C++ is a statically typed language: type checking is done at compile time.<br>As a consequence, the compiler must know the type of every name used in the program.</p>
<p><strong>Types determine</strong> the meaning of the data and operations in our programs.</p>
<h2 id="2-1-Primitive-Built-in-Types"><a href="#2-1-Primitive-Built-in-Types" class="headerlink" title="2.1 Primitive Built-in Types"></a>2.1 Primitive Built-in Types</h2><p>Includes <strong>arithmetic types</strong> and <code>void</code>. The <code>void</code> type has no associated values and can be used in only a few circumestances.</p>
<h3 id="2-1-1-Arithmetic-Types"><a href="#2-1-1-Arithmetic-Types" class="headerlink" title="2.1.1 Arithmetic Types"></a>2.1.1 Arithmetic Types</h3><p>Includes <strong>integral types</strong> and <strong>floating-point types</strong>. The standard guarantees minimum sizes of different type. Different compiler are allowed to use larger sizes for these tyes.  </p>
<ul>
<li>Q: What is significant digits?</li>
<li>A: Effective decimal numbers<ul>
<li><strong>float</strong> has 6 significant digits minimum;</li>
<li><strong>double</strong> has 10 signifiicant digits minimum;</li>
</ul>
</li>
</ul>
<p>A <code>char</code> is the same size as a single machine <code>byte</code>. A “word” si referred to a small number of bytes. Most computers a byte contains 8 bits and a word is either 32 or 63 bits, that is, 4 or 8 bytes.</p>
<p>The <strong>Type</strong> determins how many bits are used and how to interpret those bits.</p>
<p><strong>Signed an Unsigned Types</strong><br>The types <code>int</code>, <code>short</code>, <code>long</code>, <code>long long</code> are all signed. The type <code>unsigned int</code> may be abbreviated as <code>unsigned</code>.</p>
<p>There are 3 distinct basic character types: <code>char</code>, <code>unsigned char</code>, <code>signed char</code>. Which of the other two character representatinos is equivalent to <code>char</code> depends on the compiler.  </p>
<p>IN an unsigned type, all the bits represent the value. An 8-bit <code>unsigned</code> char can hold the values from 0 through 255 inclusize. An 8-bit <code>signed</code> char is guaranteed to be able to hold values from -127 through 127. Most modern machines use representations that allow values from -128 through 127.</p>
<ul>
<li>Do not use plain <code>char</code> or <code>bool</code> in arithmetic expressions. Use them <em>only</em> to hold characters or thuth values. Computtations using <code>char</code> are especially problematic because <code>char</code> is signed on some machines and <code>unsigned</code> on others.</li>
<li>Use <code>double</code> for floating-point computatins. <code>float</code> usually odes not have enough precision and the cosst of double-percision calculations versus single-precision is negligible. In fact, on some machines, <strong>double-precision operations are faster than single</strong>[P34].</li>
</ul>
<h3 id="2-1-2-Type-Conversions"><a href="#2-1-2-Type-Conversions" class="headerlink" title="2.1.2 Type Conversions"></a>2.1.2 Type Conversions</h3><ol>
<li>non<code>bool</code> arithmetic types to a <code>bool</code> object, the result is <code>false</code> if the value is 0 and <code>true</code> otherwise;</li>
<li><code>bool true</code> is 1 and <code>bool false</code> is 0;</li>
<li>Assigning a floating-point value to an object of integral type, the value is truncated.</li>
<li>When an integral value to an object of floating-point type, the frational part is zero. Precision may be lost ifg the integer has more bits than the floating-point object can accommodate.  </li>
<li>OOR (out-of-range) value to unsigned type, the result is the remainder of the value modulo the number of values the target type can hold.</li>
<li>OOR value to signed type, the reult is <strong>undefined</strong>. Undefined behavior results from errors that the compiler is not requierd to detect.</li>
</ol>
<h3 id="2-1-3-Literals"><a href="#2-1-3-Literals" class="headerlink" title="2.1.3 Literals"></a>2.1.3 Literals</h3><p><strong>Integer and Floating-Point Literals</strong>：</p>
<ul>
<li>decimal: You should know what a decimal is you stpuid fuck;</li>
<li>octal: Integer literals that begin with 0, for example 024;</li>
<li>hexadecimal: Integer literals that begin with 0x or 0X;</li>
</ul>
<p><strong>Note</strong>: For a negative decimal literal, -42, the minus sign is <em>not</em> part of the literal, the minus sign is an operator that negates the value of its (literal) operand.</p>
<p><strong>Character and Character String Literals</strong>：<br>The compiler appends a null character (<code>\0</code>) to every string literal. Thus the actual size of a string literal is one more than its apparent size.</p>
<p><strong>Escape Sequences</strong>：An <strong>escape sequence</strong> begins with a backslash.  </p>
<p><strong>Specifying the Type of a Literal</strong><br>We can override the default type of an integer, floating-point, or character lietral by supylying a suffix or prefix from Table 2.2 [P40];</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">42U</span>LL     <span class="comment">// unsigned integer litearal, type is unsigned long long</span></span><br></pre></td></tr></table></figure>

<p><strong>Boolean and Pointer Literals</strong>:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">bool</span> test = <span class="literal">false</span>;  <span class="comment">// true or false are literals of type bool;</span></span><br></pre></td></tr></table></figure>

<h2 id="2-2-Variables"><a href="#2-2-Variables" class="headerlink" title="2.2 Variables"></a>2.2 Variables</h2><h3 id="2-2-1-Variable-Definitions"><a href="#2-2-1-Variable-Definitions" class="headerlink" title="2.2.1 Variable Definitions"></a>2.2.1 Variable Definitions</h3><p>Most generally, an object is a region of memory that can contain data and has a type.</p>
<p><strong>Initilaizer</strong>: An object gets the specified value at the moment it is created.</p>
<p>The initialization an d assignment are different operations in C++. Initialization happens when a variable is given a value when it is created. Assignment obliterates an object’s current value and replaces that value with a new one.</p>
<p><strong>List Initialization</strong>:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> units_sold = &#123;<span class="number">0</span>&#125;;</span><br><span class="line"><span class="keyword">int</span> units_sold&#123;<span class="number">0</span>&#125;;</span><br></pre></td></tr></table></figure>

<p>The curly braces for initializeation was introduced as part of the new standard, which is referred to as <strong>list initalization</strong>.</p>
<p><strong>Import</strong>: this form of initialization will not be allowed if the initializer might lead to the loss of information by compiler.</p>
<p><strong>Default INitialization</strong>:<br>When a varibale is defined without an initializer, it is <strong>default initialized</strong>. One excpetion, variables of built-in type defined inside a function are <strong>uninitialized</strong>.</p>
<h3 id="2-2-2-Variable-Declarations-and-Definitions"><a href="#2-2-2-Variable-Declarations-and-Definitions" class="headerlink" title="2.2.2 Variable Declarations and Definitions"></a>2.2.2 Variable Declarations and Definitions</h3><p>Use <code>extern</code> to explict declare variable without defination. It is an error to provide an initializer on an <code>extern</code> inside a function. <code>extern</code> with an initializer is an defination.  </p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">extern</span> <span class="keyword">int</span> i;  <span class="comment">// declares but does not define i</span></span><br><span class="line"><span class="keyword">int</span> j;         <span class="comment">// declares and defines j</span></span><br></pre></td></tr></table></figure>

<p><strong>Note</strong>: Varibales must be defined exactly once but can be declared many times.</p>
<h3 id="2-2-3-Identifiers"><a href="#2-2-3-Identifiers" class="headerlink" title="2.2.3 Identifiers"></a>2.2.3 Identifiers</h3><ul>
<li>The identifier in programs may not contain two consective underscores;</li>
<li>Nor can an identifier begin with an underscore followed immediately by an uppercase letter;</li>
<li>Identifiers defined outside a function may not begin with an underscore.</li>
</ul>
<h3 id="2-2-4-Scope-of-a-Name"><a href="#2-2-4-Scope-of-a-Name" class="headerlink" title="2.2.4 Scope of a Name"></a>2.2.4 Scope of a Name</h3><p><strong>Nested Scopes</strong>: The global scope has no name, hence when the scope operator has an empty left-hand side, it is a request to fetch the name on the right-hand side from the global scope.</p>
<h2 id="2-3-Compound-Types"><a href="#2-3-Compound-Types" class="headerlink" title="2.3 Compound Types"></a>2.3 Compound Types</h2><p>A <strong>compound type</strong> is a type thas is defined in terms of another type, including <strong>references</strong> and <strong>pointers</strong>.<br>A declaration is a <strong>base type</strong> followed by a list of <strong>declarators</strong>.</p>
<h3 id="2-3-1-References"><a href="#2-3-1-References" class="headerlink" title="2.3.1 References"></a>2.3.1 References</h3><p><em>Reference</em> refers to “lvalue reference”, instead of “rvalue reference” introduced in new standard. A <strong>reference</strong> defines an alternative name for an object.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> ival = <span class="number">1024</span>;</span><br><span class="line"><span class="keyword">int</span> &amp;refVal = ival;</span><br><span class="line"><span class="keyword">int</span> &amp;refVal2;</span><br></pre></td></tr></table></figure>

<p><strong>A Reference Is an Alias</strong><br>The reference is <strong>bound</strong> to its initializer, and there is no way to rebind a reference to refer to a different object. A reference <em>must</em> be initialized.<br>A reference is just another name for an already existing object.<br>After a reference has been defined, <em>all</em> operations on that reference are actuall operations on the object to which the reference is bound.</p>
<p><strong>Reference Denfinitions</strong><br>With 2 exceptions that will be covered in S 2.4.1 and 15.2.3, the type of reference and the obect to which the reference refers must match exactly. A reference may be bound only to an object, not to a literal or to the result of a more general experession.<br>[cmake]  </p>
<h3 id="2-3-2-Pointers"><a href="#2-3-2-Pointers" class="headerlink" title="2.3.2 Pointers"></a>2.3.2 Pointers</h3><p>A <strong>Pointer</strong> is a compound type that “points to” another type.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> *ip1, *ip2;</span><br><span class="line"><span class="keyword">double</span> dp, *dp2;</span><br></pre></td></tr></table></figure>

<p><strong>Taking the Address of an Object</strong><br>A poiter holds the address of another object. We get the address of an object by usin the address-of operator (the <strong>&amp; operator</strong>).</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> ival = <span class="number">42</span>;</span><br><span class="line"><span class="keyword">int</span> *p = &amp;ival;  <span class="comment">// p holds the address of ival; p is a pointer to ival</span></span><br></pre></td></tr></table></figure>

<p>With 2 excpetion will be covered in S:2.4.2 and S:15.2.3, the typees of the pointer and the object ot which it points must muatch.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">double</span> dval;</span><br><span class="line"><span class="keyword">double</span> *pd = &amp;dval;</span><br><span class="line"><span class="keyword">double</span> *pd2 = pd;</span><br><span class="line"><span class="keyword">int</span> *pi = pd;</span><br><span class="line">pi = &amp;dval;</span><br></pre></td></tr></table></figure>

<p><strong>Point Value</strong><br>The walue (i.e., the address) stored in a pointer can be in one of four states:</p>
<ol>
<li>An object;</li>
<li>The location just immediately past the end of an object;</li>
<li>A unll pointer, indicating that is is not bound to any object;</li>
<li>Invalid, values other than the preceding three are invalid.</li>
</ol>
<p><strong>Using a Pointer to Access an Object</strong><br>Ust the dereference operator (the <strong>*</strong> operator) to access the object:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> ival = <span class="number">42</span>;</span><br><span class="line"><span class="keyword">int</span> *p = *ival;</span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; *p;</span><br></pre></td></tr></table></figure>

<p>Dereferencoing a pointer yields the object ot which the pointer points.</p>
<p><strong>Note</strong>: Some symbols have multiple meannings</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> i = <span class="number">42</span>;</span><br><span class="line"><span class="keyword">int</span> &amp;r = i;</span><br><span class="line"><span class="keyword">int</span> *p;</span><br><span class="line">p = &amp;i;         <span class="comment">//  &amp; used as the address-of operation</span></span><br><span class="line">*p = i          <span class="comment">//  * used as dereference operation</span></span><br><span class="line"><span class="keyword">int</span> &amp;r2 = *p;   <span class="comment">//  &amp; as part of the declaration, * as derefernec operation</span></span><br></pre></td></tr></table></figure>

<p><strong>Null Pointer</strong>:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> *p1 = <span class="literal">nullptr</span>;</span><br><span class="line"><span class="keyword">int</span> *p2 = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* must #include cstdlib */</span></span><br><span class="line"><span class="keyword">int</span> *p3 = <span class="literal">NULL</span>;</span><br></pre></td></tr></table></figure>

<p>Older programs sometimes use a <strong>preprocessor variable</strong> named <code>NULL</code>, which the <code>cstdlib</code> header defines as 0. A <strong>preprocessor</strong> is a program that runs before the compiler. Preprocessor varibales are managed by the preprocessor, and are not part of the <code>std</code> namespace.</p>
<p><strong>Assignment and Pointers</strong><br>A reference is not an object.  </p>
<p><strong>Other Pointer Operations</strong><br>Any nonzero pointer evalutaes as <code>true</code>. Two pointers are equal if they hold the same address or both are null pointers. In continously memory, a pointer one past the end of a different object ot heldo the same ddress as a pointer to an object.</p>
<p><strong><code>void*</code> Pointers</strong><br>The type <code>void*</code> is a special pointer type that can hold the address of any object, it holds an address but the type of the object at that address is unknown. Generally, a <code>void*</code> pointer is used to dieal with memory as memory, rather than using the pointer to access the object stored in that memory.</p>
<h3 id="2-3-3-Understanding-Compound-Type-Declarations"><a href="#2-3-3-Understanding-Compound-Type-Declarations" class="headerlink" title="2.3.3 Understanding Compound Type Declarations"></a>2.3.3 Understanding Compound Type Declarations</h3><p><strong>Defining Multiple Variable</strong>: It could be really confusing, put whitespace between the type modifier and the name being declared. Use <strong>First Style</strong> to declare variables.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>* p1, p2;  <span class="comment">//  p1 is a pointer to int; p2 is an int</span></span><br></pre></td></tr></table></figure>

<p><strong>Pointer to Pointers</strong>: We indicate each pointer level by its own *. ** for a pointer to a pointer, *** for a pointer to a pointer to a pointer.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> ival = <span class="number">1024</span>;</span><br><span class="line"><span class="keyword">int</span> * pi = &amp;ival;   <span class="comment">//  pi points to an int</span></span><br><span class="line"><span class="keyword">int</span> **ppi = &amp;pi;    <span class="comment">//  ppi points to a pointer points to an int</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">"The value of ival\n"</span></span><br><span class="line">     &lt;&lt; <span class="string">"direct value: "</span> &lt;&lt; ival &lt;&lt; <span class="string">"\n"</span></span><br><span class="line">     &lt;&lt; <span class="string">"indirect value: "</span> &lt;&lt; *pi &lt;&lt; <span class="string">"\n"</span></span><br><span class="line">     &lt;&lt; <span class="string">"doubly indirect value: "</span> &lt;&lt; **ppi  <span class="comment">// deference twice</span></span><br><span class="line">     &lt;&lt; <span class="built_in">endl</span>;</span><br></pre></td></tr></table></figure>

<p><strong>Reference to Pointers</strong>: A reference is not an object. Hence we may not have a pointer to a reference. But we can define a reference to a pointer.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> val = <span class="number">42</span>;</span><br><span class="line"><span class="keyword">int</span> *pi;</span><br><span class="line"><span class="keyword">int</span> *&amp;r = pi; <span class="comment">//  r is a reference to pi</span></span><br><span class="line">r = &amp;val; <span class="comment">// r is a reference, assign to r equals to assigning to pi</span></span><br><span class="line">*r = <span class="number">0</span>; <span class="comment">//  dereference r yields i, this is assigning i to be 0</span></span><br></pre></td></tr></table></figure>

<p><strong>Notes</strong>: As illustrate above, you can use <code>**pi</code> to indicate a pointer pointing to a pointer, but you can’t use <code>&amp;&amp;p</code> to indicate a reference refering to a reference, cause reference is not a project.</p>
<h2 id="const-Qualifier"><a href="#const-Qualifier" class="headerlink" title="const Qualifier"></a><code>const</code> Qualifier</h2><p>Since wo can’t change the value of <code>const</code>, it must be initialized.</p>
<p><strong>By Default, <code>const</code> Objects Are Local to a File</strong>: When a <code>const</code> object is initialized from a compile-time constant, the compiler will usually repalce uses of the varibale with its corresponding value during compilation. When we define a <code>const</code> with the same name in multiple files, it is as if we had written definitions for separate variables in each file. If a single instance of a <code>const</code> variable, we use the keyword <code>extern</code> on both its definition and declaration(s).</p>
<p>e.g., if you what to share <code>const</code> accross different files, you must define the varibale as <code>extern</code>.</p>
<h3 id="2-4-1-Reference-to-const"><a href="#2-4-1-Reference-to-const" class="headerlink" title="2.4.1 Reference to const"></a>2.4.1 Reference to <code>const</code></h3><p>A reference to <code>const</code> cannot be used to change the object to which the reference is bound.<br><strong>TERMINOLOGY</strong>: <code>const</code> Reference is a reference to <code>const</code>.</p>
<p><strong>Initialization and References to <code>const</code></strong>: One of the 2 exceptions to the rule that the type of a reference must match the type  of the object to which it refers: we can initialize a reference to <code>const</code> from any expression that can be converted to the type of the reference.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> i = <span class="number">42</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> &amp;r1 = i;        <span class="comment">//  we can bind a const int&amp; to a plain</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> &amp;r2 = <span class="number">42</span>;       <span class="comment">//  ok: r1 is a reference to const</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> &amp;r3 = r1 * <span class="number">2</span>;   <span class="comment">//  ok: r3 is a reference to const</span></span><br><span class="line"><span class="keyword">int</span> &amp;r4 = r1 * <span class="number">2</span>;         <span class="comment">//  error: r4 is a nonconst reference</span></span><br></pre></td></tr></table></figure>

<p><strong>Important: AReference to <code>const</code> May Refer to an Object That is Not <code>const</code></strong>:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> i = <span class="number">42</span>;</span><br><span class="line"><span class="keyword">int</span> &amp;r1 = i;        <span class="comment">//  r1 bound to i</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> &amp;r2 = i;  <span class="comment">//  r2 also bound to i; but connot be used to change i;</span></span><br><span class="line">r1 = <span class="number">0</span>;             <span class="comment">//  r1 is not const; i is now 0</span></span><br><span class="line">r2 = <span class="number">0</span>;             <span class="comment">//  error: r2 is a reference to const</span></span><br></pre></td></tr></table></figure>

<h3 id="2-4-2-Pointers-and-const"><a href="#2-4-2-Pointers-and-const" class="headerlink" title="2.4.2 Pointers and const"></a>2.4.2 Pointers and <code>const</code></h3><p>Like a reference to <code>cost</code>, a pointer to const may not be used to change the object to which the pointer points.<br><strong>Important</strong>: There is no guarantee that an object pointed to by a pointer to <code>const</code> won’t change.</p>
<p><strong><code>const</code> Pointers</strong>: We indicate that the pointer is <code>const</code> by putting the <code>const</code> after *.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> errNumb = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> *<span class="keyword">const</span> curErr = &amp;errNumb;     <span class="comment">//  curErr will always point to errNumb</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> pi = <span class="number">3.14159</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> *<span class="keyword">const</span> pip = &amp;pi;    <span class="comment">//  pip is a const pointer to a const object</span></span><br></pre></td></tr></table></figure>

<h3 id="2-4-3-Top-level-const"><a href="#2-4-3-Top-level-const" class="headerlink" title="2.4.3 Top-level const"></a>2.4.3 Top-level <code>const</code></h3><p>The term <strong>top-level const</strong> to indicate that the pointer itself is a const. When a pointer can point to a const object, we refer to that const as a low-level const.</p>
<h3 id="2-4-4-constexpr-and-Constant-Expressions"><a href="#2-4-4-constexpr-and-Constant-Expressions" class="headerlink" title="2.4.4 constexpr and Constant Expressions"></a>2.4.4 <code>constexpr</code> and Constant Expressions</h3><p>A <strong>constant expression</strong> is an expression whose value cannot change tnd that can be evalutaed at compile time.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> max_files = <span class="number">20</span>;         <span class="comment">//  this is const expression</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> limit = max_files + <span class="number">1</span>;  <span class="comment">//  this is const expression</span></span><br><span class="line"><span class="keyword">int</span> staff_size = <span class="number">27</span>;        <span class="comment">//  not a constant expression</span></span><br><span class="line">cnost <span class="keyword">int</span> sz = get_size();  <span class="comment">//  not a constant because it is not known util run time</span></span><br></pre></td></tr></table></figure>

<p><strong>C++ 11</strong>: Under new standard, we can aske the compiler to verify that a varibale is a constant expression by declaring the varibale in a <code>constexpr</code> declaration. Also a function simple enough to be evaluate at compile time could also be used as <code>constexpr</code>.</p>
<p><strong>Literal Types</strong>: The types that we can use in a <code>constexpr</code> are known as “literal types” because they are simple enough to have literal values.</p>
<p><strong>Pointers and <code>constexpr</code></strong>: When we define a pointer in a <code>constexpr</code> declaration, the <code>constexpr</code> specifier applies to the pointer, not the type to which the pointer points.</p>
<h2 id="2-5-Dealing-with-Types"><a href="#2-5-Dealing-with-Types" class="headerlink" title="2.5 Dealing with Types"></a>2.5 Dealing with Types</h2><h3 id="2-5-1-Type-Aliases"><a href="#2-5-1-Type-Aliases" class="headerlink" title="2.5.1 Type Aliases"></a>2.5.1 Type Aliases</h3><p>A type alias is a name that is a synonym for another type, whichi simplyfing complicated type definitions, making those types easier to use.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">double</span> wages;</span><br><span class="line"><span class="keyword">typedef</span> wages base, *p;</span><br></pre></td></tr></table></figure>

<p>The new standard introduced a second way to define a type alias, via an alias declaration:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> SI = Sales_item;</span><br></pre></td></tr></table></figure>

<p><strong>Pointers, <code>const</code>, nad Type Aliases</strong>:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">char</span> *pstring;</span><br><span class="line"><span class="keyword">const</span> pstring cstr = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">char</span> *cstr = <span class="number">0</span>;   <span class="comment">//  this is illegal</span></span><br></pre></td></tr></table></figure>

<h3 id="2-5-2-The-auto-Type-Specifier"><a href="#2-5-2-The-auto-Type-Specifier" class="headerlink" title="2.5.2 The auto Type Specifier"></a>2.5.2 The <code>auto</code> Type Specifier</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">auto</span> item = val1 + val2;</span><br></pre></td></tr></table></figure>

<h2 id="2-6-Deifining-Our-Own-Data-Structures"><a href="#2-6-Deifining-Our-Own-Data-Structures" class="headerlink" title="2.6 Deifining Our Own Data Structures"></a>2.6 Deifining Our Own Data Structures</h2><h3 id="2-6-1-Defining-the-Sales-data-Type"><a href="#2-6-1-Defining-the-Sales-data-Type" class="headerlink" title="2.6.1 Defining the Sales_data Type"></a>2.6.1 Defining the Sales_data Type</h3><p>The close curly that ends the class body must be fgollowed by a semicolon, so we can define varibales after the class body:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Sales_data</span> &#123;</span></span><br><span class="line">  <span class="built_in">std</span>::<span class="built_in">string</span> bookNo;</span><br><span class="line">  <span class="keyword">unsigned</span> units_sold = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">double</span> revenue = <span class="number">0.0</span>;</span><br><span class="line">&#125; accum, trans, *salesptr;</span><br></pre></td></tr></table></figure>

<p><strong>Class Data Members</strong>: A type of members in a struct.</p>
<h3 id="2-6-2-Using-the-Sales-data-Class"><a href="#2-6-2-Using-the-Sales-data-Class" class="headerlink" title="2.6.2 Using the Sales_data Class"></a>2.6.2 Using the Sales_data Class</h3><h3 id="2-6-3-Wrinting-Our-Own-Header-Files"><a href="#2-6-3-Wrinting-Our-Own-Header-Files" class="headerlink" title="2.6.3 Wrinting Our Own Header Files"></a>2.6.3 Wrinting Our Own Header Files</h3><p>A header might be included more than twice, we need to write our headers in a way that is safe even if the header is included multiple time.</p>
<p><strong>Note</strong>: Whenever a header is updated, the source files that use that header must be recompiled to get the new or changed declarations.</p>
<p><strong>A Brief Introduction to the Preprocessor</strong>: The most common technique for making it safe to include a header multiple times relies on the <strong>preprocessor</strong>, which inherts from C is a progrom that runs before the compiler and changes the source text of our programs. <code>#include</code> is a processor.</p>
<p><strong>WARNING</strong>: Preprocessor variable names do not respect C++ scoping rules.</p>
<p><strong>Note</strong>: What is <strong>Header guards</strong> ?</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* header guards for sales data */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> SALES_DATA_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SALES_DATA_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span>  SALES_DATA_H</span></span><br></pre></td></tr></table></figure>

<h2 id="Acknowledgmets"><a href="#Acknowledgmets" class="headerlink" title="Acknowledgmets"></a>Acknowledgmets</h2><ul>
<li>With all respect to Mr. Zeng Xianliang, my colleague, who introduced this stunning book to me which he himself never really read it;</li>
<li>Full respect to the author of the book: Cpp Primer, Stanley B. Lippman, Josee Lajoie, Barbara E. Moo. Their great works perserves;</li>
<li>Didn’t came up who else is helping me with it at current stage.</li>
</ul>

          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/04/Deep-Learning-Environment/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zepyhrus">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2019/07/04/Deep-Learning-Environment/" class="post-title-link" itemprop="url">Deep Learning Environment</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 2019-07-04 00:00:00" itemprop="dateCreated datePublished" datetime="2019-07-04T00:00:00+08:00">2019-07-04</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-09-11 15:30:14" itemprop="dateModified" datetime="2019-09-11T15:30:14+08:00">2019-09-11</time>
              </span>
            
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <p>Installation structions for configuration DL environment</p>
<ul>
<li>Ubuntu 18.04 LTS, kernel version 4.18 (You may use <code>uname -r</code> to check your kernel version, currently, kernel version 5.0.0 is suffering the losing of Nvidia driver from time to time)</li>
<li>Nvidia Tesla P40 24G/Tesla P4 8G/Nvidia Quadro P2000 8G</li>
<li>CUDA 10.0</li>
<li>CUDNN 7.6.1 for CUDA 10.0</li>
<li>opencv 3.4.5</li>
<li>tensorflow-gpu 1.12.0</li>
<li>caffe 1.0, from BVLC</li>
<li>RefineDet, also with BVLC aligned</li>
<li>pytorch 1.1, which libtorch takes gcc&gt;=6. for compilation on Ubuntu 18.04</li>
</ul>
<p>Tips:</p>
<ul>
<li>At current stage, an update of Ubuntu kernel, will cause the loss of Nvidia driver. A version of 418 works the best for 4.18~4.24 version of Ubuntu kernel;</li>
<li>DO NOT use sudo apt autoremove, unless you know what you are doing/removing;</li>
<li>Read the instructions carefully until you know what you are doing;</li>
<li><code>make -j</code> may cause OOM problem, do not use it unless you know how many core of your hardware has;</li>
</ul>
<p>The full installation (until the successful installation of pytorch) will takes around 3 ~ 4 hours, depends on how familiar you are with Linux system…: Good luck, now let’s launch!</p>
<h1 id="Install-system-dependency"><a href="#Install-system-dependency" class="headerlink" title="Install system dependency"></a>Install system dependency</h1><h2 id="Add-Aliyun-source"><a href="#Add-Aliyun-source" class="headerlink" title="Add Aliyun source"></a>Add Aliyun source</h2><p>If you are not in China, you may skip this</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo cp /etc/apt/sources.list /etc/apt/sources.list.bak</span><br></pre></td></tr></table></figure>

<p>you will have no vim before you proceed</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo gedit /etc/apt/sources.list</span><br></pre></td></tr></table></figure>

<p>add following configurations to the source list:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">deb http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse</span><br></pre></td></tr></table></figure>

<h2 id="Refresh-system"><a href="#Refresh-system" class="headerlink" title="Refresh system"></a>Refresh system</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt upgrade</span><br></pre></td></tr></table></figure>

<p>Necessary tools for linux</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install openssh-server</span><br><span class="line">sudo apt install net-tools</span><br></pre></td></tr></table></figure>

<p>Installing: protobuf/opencv/hdf5/boost/openblas/atlas/lapack/gflags/glog/lmdb</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install libprotobuf-dev libleveldb-dev libsnappy-dev libopencv-dev libhdf5-serial-dev protobuf-compiler</span><br><span class="line">sudo apt-get install --no-install-recommends libboost-all-dev</span><br><span class="line">sudo apt-get install libopenblas-dev liblapack-dev libatlas-base-dev</span><br><span class="line">sudo apt-get install libgflags-dev libgoogle-glog-dev liblmdb-dev</span><br></pre></td></tr></table></figure>

<p>Recommanded packages: freeglut, x11, xmu, xi gl1-mesa, glu1-mesa, glu1-mesa-dev: compiling cuda will throw exceptions: Missing recommanded libraries … if you don’t install them</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install freeglut3-dev build-essential libx11-dev libxmu-dev libxi-dev libgl1-mesa-glx libglu1-mesa libglu1-mesa-dev</span><br></pre></td></tr></table></figure>

<p>Other necessary packages:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install graphviz  # Install graphviz, or will cause pytest failed later</span><br><span class="line"></span><br><span class="line">sudo apt install git</span><br><span class="line"></span><br><span class="line">sudo apt-get install vim-gtk</span><br><span class="line"></span><br><span class="line">sudo apt-get install ibus-pinyin</span><br></pre></td></tr></table></figure>

<h1 id="Install-Nvidia-drivers"><a href="#Install-Nvidia-drivers" class="headerlink" title="Install Nvidia drivers"></a>Install Nvidia drivers</h1><h2 id="Disable-nouveau"><a href="#Disable-nouveau" class="headerlink" title="Disable nouveau"></a>Disable nouveau</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/modprobe.d/blacklist.conf</span><br></pre></td></tr></table></figure>

<p>Add, no need to source: </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">blacklist nouveau</span><br></pre></td></tr></table></figure>

<h2 id="Install-drivers"><a href="#Install-drivers" class="headerlink" title="Install drivers"></a>Install drivers</h2><p>using .run file</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo bash ./NVIDIA-Linux-x86_64-418.67.run</span><br></pre></td></tr></table></figure>

<p>Or using .deb file</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo dkpg -i ./NVIDIA-Linux-x86_64-418.67.deb</span><br></pre></td></tr></table></figure>

<p>Check, running following command should have popups</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvidia-smi</span><br></pre></td></tr></table></figure>

<h2 id="Reinstall-drivers"><a href="#Reinstall-drivers" class="headerlink" title="Reinstall drivers"></a>Reinstall drivers</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get purge nvidia*</span><br><span class="line">sudo add-apt-repository ppa:graphics-drivers</span><br><span class="line">sudo bash NVIDIA-Linux-x86_64-430.26.run</span><br></pre></td></tr></table></figure>

<h1 id="Install-CUDA-10-0"><a href="#Install-CUDA-10-0" class="headerlink" title="Install CUDA 10.0"></a>Install CUDA 10.0</h1><p>You don’t need to downgrade gcc installing CUDA 10.0</p>
<h2 id="Install-cuda"><a href="#Install-cuda" class="headerlink" title="Install cuda"></a>Install cuda</h2><p>do NOT install the drivers from cuda_***.run</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo bash ./cuda_10.0.130_410.48_linux.run</span><br></pre></td></tr></table></figure>

<h2 id="Configure-system-path"><a href="#Configure-system-path" class="headerlink" title="Configure system path"></a>Configure system path</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo vim ~/.bashrc</span><br><span class="line"></span><br><span class="line">export PATH=/usr/local/cuda/bin:$PATH</span><br><span class="line">export LD_LIBRARY_PATH=/usr/local/cuda/lib64:$LD_LIBRARY_PATH</span><br><span class="line"></span><br><span class="line">source ~/.bashrc</span><br></pre></td></tr></table></figure>

<h2 id="Test"><a href="#Test" class="headerlink" title="Test"></a>Test</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd ~/NVIDIA_CUDA-10.0_Samples/1_Utilities/deviceQuery/samples/</span><br><span class="line">sudo make</span><br><span class="line">sudo ./deviceQuery</span><br></pre></td></tr></table></figure>

<ul>
<li>this indicates that the successfull installation of cuda:</li>
<li>deviceQuery, CUDA Driver = CUDART, CUDA Driver Version = 10.2, CUDA Runtime</li>
<li>Version = 10.0, NumDevs = 1</li>
<li>Result = PASS</li>
</ul>
<h1 id="Install-CUDNN"><a href="#Install-CUDNN" class="headerlink" title="Install CUDNN"></a>Install CUDNN</h1><p>Latest CUDNN could be installed through dpkg:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dpkg -i libcudnn7_7.6.2.24-1+cuda10.0_amd64.deb</span><br></pre></td></tr></table></figure>

<p>Or, you can install it from original file.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">tar -xvf cudnn-10.0-linux-x64-v7.6.1.34.tgz</span><br><span class="line"></span><br><span class="line">sudo cp cuda/include/cudnn.h /usr/local/cuda/include/</span><br><span class="line">sudo cp cuda/lib64/* /usr/local/cuda/lib64/</span><br></pre></td></tr></table></figure>

<h1 id="Install-Anaconda"><a href="#Install-Anaconda" class="headerlink" title="Install Anaconda"></a>Install Anaconda</h1><p>Damn idiots, you should know how to install anaconda and its environment</p>
<h2 id="Install-Anaconda-from-shell"><a href="#Install-Anaconda-from-shell" class="headerlink" title="Install Anaconda from shell"></a>Install Anaconda from shell</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash Anaconda3-2019.03-Linux-x86_64.sh</span><br></pre></td></tr></table></figure>

<h2 id="Create-virtual-environment"><a href="#Create-virtual-environment" class="headerlink" title="Create virtual environment"></a>Create virtual environment</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">conda create -n caffe-gpu python=3.6</span><br><span class="line">conda activate caffe-gpu</span><br></pre></td></tr></table></figure>

<h1 id="Install-opencv"><a href="#Install-opencv" class="headerlink" title="Install opencv"></a>Install opencv</h1><p><strong>Import notes:</strong>: Install from source! You are an grown-up now, you should be able to handle it. Earlier version, like 3.2.0 and before, using opencv may cause problem, please recompile opencv:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/lib/libopencv_imgcodecs.so.3.2.0: undefined reference to `TIFFReadRGBAStrip@LIBTIFF_4.0_apos</span><br></pre></td></tr></table></figure>

<p>Then <strong>Download opencv 3.4.5 and opencv_contrib 3.4.5.</strong>. Check your opencv version:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pkg-config --modversion opencv</span><br></pre></td></tr></table></figure>

<p>In case of reinstall, you got to remove all opencv packages before you proceed, works like charm</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt remove libopencv*</span><br></pre></td></tr></table></figure>

<h2 id="Install-dependencies"><a href="#Install-dependencies" class="headerlink" title="Install dependencies"></a>Install dependencies</h2><p>I still didn’t figure out whether “pip install opencv-python” in the virtual environment will add opencv lib to LD_LIBRARY_PATH</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install build-essential</span><br><span class="line">sudo apt-get install cmake libgtk2.0-dev pkg-config libavcodec-dev libavformat-dev libswscale-dev </span><br><span class="line">sudo apt-get install python-dev python-numpy libtbb2 libtbb-dev libjpeg-dev libpng-dev libtiff-dev libjasper-dev libdc1394-22-dev</span><br><span class="line">sudo apt-get install build-essential qt5-default ccache libv4l-dev libavresample-dev  libgphoto2-dev libopenblas-base libopenblas-dev doxygen libvtk6-dev</span><br><span class="line">sudo apt-get install python3-dev python3-numpy libgtk-3-dev libxvidcore-dev libx264-dev gfortran openexr</span><br><span class="line">sudo apt-get install pkg-config</span><br></pre></td></tr></table></figure>

<p>E: Unable to locate package libjasper-dev, This is because we had configured the Ali source for our ubuntu</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository &quot;deb http://security.ubuntu.com/ubuntu xenial-security main&quot;</span><br><span class="line">sudo apt update</span><br><span class="line">sudo apt install libjasper1 libjasper-dev</span><br></pre></td></tr></table></figure>

<p>If you are running a brand new os: i.e., an os just installed without any updates, you may fail install above packages, an upgrade of your system will solve the problem.</p>
<h1 id="Install-opencv-3-4-5-from-source"><a href="#Install-opencv-3-4-5-from-source" class="headerlink" title="Install opencv 3.4.5 from source"></a>Install opencv 3.4.5 from source</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">unzip opencv-3.4.5.zip </span><br><span class="line">tar zxvf opencv_contrib-3.4.5.tar.gz</span><br></pre></td></tr></table></figure>

<h2 id="Make"><a href="#Make" class="headerlink" title="Make"></a>Make</h2><p><strong>Note</strong>: you should change the cmake paths according to your own system.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">cd opencv-3.4.5</span><br><span class="line">mkdir build &amp;&amp; cd build</span><br><span class="line">cmake \</span><br><span class="line">	-D CMAKE_BUILD_TYPE=Release \</span><br><span class="line">	-D CMAKE_INSTALL_PREFIX=/usr/local \</span><br><span class="line">	-D WITH_CUDA=ON \</span><br><span class="line">	-D ENABLE_PRECOMPILED_HEADERS=OFF\</span><br><span class="line">	-D ENABLE_FAST_MATH=1 \</span><br><span class="line">	-D CUDA_FAST_MATH=1 \</span><br><span class="line">	-D WITH_CUBLAS=1 \</span><br><span class="line">	-D INSTALL_PYTHON_EXAMPLES=ON \</span><br><span class="line">	-D INSTALL_C_EXAMPLES=ON \</span><br><span class="line">	-D OPENCV_ENABLE_NONFREE=ON \</span><br><span class="line">	-D OPENCV_EXTRA_MODULES_PATH=/home/ubuntu/Installation/opencv_contrib-3.4.5/modules/ \</span><br><span class="line">	-D PYTHON_EXECUTABLE=/home/ubuntu/anaconda3/envs/torch-gpu/bin/python \</span><br><span class="line">	-D BUILD_TIFF=ON ..</span><br><span class="line"></span><br><span class="line">make -j4</span><br><span class="line">sudo make install</span><br></pre></td></tr></table></figure>

<p><strong>Note</strong>: If you are in mainland China, you may have trouble building the opencv project 3rd party lib: ippicv. You can download it manually from <a href="https://github.com/opencv/opencv_3rdparty/tree/ippicv/internal_3.4_20190204/ippicv" target="_blank" rel="noopener">here</a>. Then cd to <code>${OPENCV_ROOT}/third_party/ippicv/</code> and modify the ippicv.cmake file from:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;https://raw.githubusercontent.com/opencv/opencv_3rdparty/$&#123;IPPICV_COMMIT&#125;/ippicv/&quot;</span><br></pre></td></tr></table></figure>

<p>to (depending on where you put lib ippicv):</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;file://~/Downloads/&quot;</span><br></pre></td></tr></table></figure>

<p>Or:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/opencv/opencv_3rdparty/blob/ippicv/internal_3.4_20190204/ippicv/</span><br></pre></td></tr></table></figure>

<h2 id="Share-the-link-library-through-the-system"><a href="#Share-the-link-library-through-the-system" class="headerlink" title="Share the link library through the system"></a>Share the link library through the system</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ldconfig -v</span><br></pre></td></tr></table></figure>

<p>Add opencv libraries to system path, and add <code>/usr/local/lib</code> to opencv.conf file</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/ld.so.conf.d/opencv.conf </span><br><span class="line"></span><br><span class="line">sudo ldconfig</span><br></pre></td></tr></table></figure>

<h2 id="Configure-bash"><a href="#Configure-bash" class="headerlink" title="Configure bash"></a>Configure bash</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo gedit /etc/bash.bashrc</span><br></pre></td></tr></table></figure>

<p>Add following command to the .bashrc file</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">PKG_CONFIG_PATH=$PKG_CONFIG_PATH:/usr/local/lib/pkgconfig</span><br><span class="line">export PKG_CONFIG_PATH</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">source /etc/bash.bashrc</span><br><span class="line"></span><br><span class="line">sudo updatedb</span><br></pre></td></tr></table></figure>

<h2 id="Test-1"><a href="#Test-1" class="headerlink" title="Test"></a>Test</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd $&#123;OPENCV_ROOT&#125;/opencv-3.4.5/samples/cpp/example_cmake</span><br><span class="line">cmake .</span><br><span class="line">make</span><br><span class="line">./opencv_example</span><br></pre></td></tr></table></figure>

<p>You should see the popup of your camera, with Hello opencv on the left corner</p>
<h1 id="Install-opencv-4"><a href="#Install-opencv-4" class="headerlink" title="Install opencv 4"></a>Install opencv 4</h1><p>Install system essentials:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install build-essential</span><br><span class="line">sudo apt-get install cmake git libgtk2.0-dev pkg-config libavcodec-dev libavformat-dev libswscale-dev</span><br><span class="line">sudo apt-get install python-dev python-numpy libtbb2 libtbb-dev libjpeg-dev libpng-dev libtiff-dev libjasper-dev libdc1394-22-dev</span><br></pre></td></tr></table></figure>

<h2 id="TODO"><a href="#TODO" class="headerlink" title="TODO"></a>TODO</h2><h1 id="Install-caffe"><a href="#Install-caffe" class="headerlink" title="Install caffe"></a>Install caffe</h1><p>If you have upgrade cuda, please recompile cuda: <strong>Not sure if it is ok not recompiling cuda, haven’t tested it</strong></p>
<h2 id="Download"><a href="#Download" class="headerlink" title="Download"></a>Download</h2><p>Clone original caffe from github, usually it takes a lot of time</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/BVLC/caffe.git</span><br><span class="line">cd caffe</span><br><span class="line">cp Makefile.config.example Makefile.config</span><br></pre></td></tr></table></figure>

<h2 id="Configuration"><a href="#Configuration" class="headerlink" title="Configuration"></a>Configuration</h2><p>you may need to install the ${CAFFEROOT}/python/requirements.txt first: pip intsall -r requirements.txt</p>
<p>take great care of the Makefile.config file, especially following lines:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">USE_CUDNN := 1</span><br><span class="line">...</span><br><span class="line">OPENCV_VERSION := 3</span><br><span class="line">...</span><br><span class="line">CUDA_DIR := /usr/local/cuda</span><br><span class="line">...</span><br><span class="line">CUDA_ARCH :=    \</span><br><span class="line">                -gencode arch=compute_30,code=sm_30 \</span><br><span class="line">                -gencode arch=compute_35,code=sm_35 \</span><br><span class="line">                -gencode arch=compute_50,code=sm_50 \</span><br><span class="line">                -gencode arch=compute_52,code=sm_52 \</span><br><span class="line">                -gencode arch=compute_60,code=sm_60 \</span><br><span class="line">                -gencode arch=compute_61,code=sm_61 \</span><br><span class="line">                -gencode arch=compute_61,code=compute_61</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>Uncomment to use Python 3 (default is Python 2)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">PYTHON_LIBRARIES := boost_python3 python3.6m</span><br><span class="line">PYTHON_INCLUDE := /usr/include/python3.6m \</span><br><span class="line">                /usr/local/lib/python3.6/dist-packages/numpy/core/include</span><br><span class="line">...</span><br><span class="line">WITH_PYTHON_LAYER := 1</span><br><span class="line">...</span><br><span class="line">INCLUDE_DIRS := $(PYTHON_INCLUDE) /usr/local/include /usr/include/hdf5/serial /usr/local/cuda/include /usr/local/include/opencv</span><br><span class="line">LIBRARY_DIRS := $(PYTHON_LIB) /usr/local/lib /usr/lib /usr/lib/x86_64-linux-gnu /usr/lib/x86_64-linux-gnu/hdf5/serial</span><br></pre></td></tr></table></figure>

<h2 id="Make-and-test"><a href="#Make-and-test" class="headerlink" title="Make and test"></a>Make and test</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">make -j4</span><br><span class="line">make test -j4</span><br><span class="line">make runtest -j4</span><br></pre></td></tr></table></figure>

<h2 id="Install-pycaffe"><a href="#Install-pycaffe" class="headerlink" title="Install pycaffe"></a>Install pycaffe</h2><p>Install prerequsite python packages</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim requirements.txt</span><br></pre></td></tr></table></figure>

<p>Change “python-dateutil&gt;=1.4,&lt;2” to “python-dateutil&gt;=1.4”\</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd python</span><br></pre></td></tr></table></figure>

<p>The python path referes to the python folder inside caffe</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip install –r requirements.txt</span><br><span class="line">pip install pydot numpy scipy matplotlib sklearn scikit-image h5py protobuf leveldb networkx nose pandas gflags Cython ipython gfortran</span><br></pre></td></tr></table></figure>

<p>Compile pycaffe</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd ..</span><br><span class="line">make pycaffe</span><br></pre></td></tr></table></figure>

<p>add compiled libraries to system PYTHONPATH: NOTE: NOT the python in ${CAFFE_DIR}/build, but the python in ${CAFFE_DIR}</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export PYTHONPATH=/home/$&#123;USERNAME&#125;/Workspace/caffe/python:$PYTHONPATH</span><br></pre></td></tr></table></figure>

<p>test:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make pytest</span><br></pre></td></tr></table></figure>

<p>get OK, done!</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">conda activate caffe-gpu</span><br><span class="line">python</span><br><span class="line">import caffe</span><br></pre></td></tr></table></figure>

<p>this should work, at this time of view, the environment for caffe: caffe-gpu should works well</p>
<h1 id="Install-tensorflow-gpu"><a href="#Install-tensorflow-gpu" class="headerlink" title="Install tensorflow-gpu"></a>Install tensorflow-gpu</h1><h2 id="Remove-old-env"><a href="#Remove-old-env" class="headerlink" title="Remove old env"></a>Remove old env</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda remove --name tensorflow-gpu --all</span><br></pre></td></tr></table></figure>

<p>Damn, you should be able to install tensorflow-gpu, create virtual env:</p>
<ul>
<li>Do not use tensorflow 1.12.0 for CUDA 10, use the newest tensorflow==1.14.0!</li>
<li>Do not use CUDA 10.1! This will fail the tensorflow-gpu installation</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">conda create -n tf-gpu python=3.6</span><br><span class="line">conda activate tf-gpu</span><br><span class="line">pip install tensorflow-gpu</span><br></pre></td></tr></table></figure>

<p>Vvalidate tensorflow installation</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">python</span><br><span class="line">import tensorflow as tf</span><br><span class="line">tf.test.is_gpu_available()</span><br></pre></td></tr></table></figure>

<h1 id="Install-torch-gpu"><a href="#Install-torch-gpu" class="headerlink" title="Install torch-gpu"></a>Install torch-gpu</h1><p>You may refer to this link <a href="https://github.com/pytorch/pytorch#from-source" target="_blank" rel="noopener">here</a>. </p>
<h2 id="Remove-old-environment"><a href="#Remove-old-environment" class="headerlink" title="Remove old environment"></a>Remove old environment</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda remove --name torch-gpu --all</span><br></pre></td></tr></table></figure>

<p>create virtual env:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">conda create -n torch-gpu python=3.6</span><br><span class="line">conda activate torch-gpu</span><br><span class="line">conda install pytorch torchvision cudatoolkit=10.0 -c pytorch</span><br></pre></td></tr></table></figure>

<h2 id="Install-pylab"><a href="#Install-pylab" class="headerlink" title="Install pylab:"></a>Install pylab:</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip install numpy scipy matplotlib lmdb</span><br><span class="line">pip install pandas scikit-image filterpy</span><br></pre></td></tr></table></figure>

<h2 id="Install-from-source"><a href="#Install-from-source" class="headerlink" title="Install from source"></a>Install from source</h2><p>A anaconda environment is highly recommended</p>
<h2 id="Install-dependencies-1"><a href="#Install-dependencies-1" class="headerlink" title="Install dependencies"></a>Install dependencies</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda install numpy ninja pyyaml mkl mkl-include setuptools cmake cffi typing</span><br></pre></td></tr></table></figure>

<p>Depending on your cuda version, it could be [magma-cuda92 | magma-cuda100 ]</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda install -c pytorch magma-cuda100</span><br></pre></td></tr></table></figure>

<h2 id="Get-PyTorch-Source"><a href="#Get-PyTorch-Source" class="headerlink" title="Get PyTorch Source"></a>Get PyTorch Source</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone --recursive https://github.com/pytorch/pytorch</span><br></pre></td></tr></table></figure>

<p>compile libtorch, Note that the core of libtorch is independent from python</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd pytorch</span><br></pre></td></tr></table></figure>

<p>Please use GCC 6 or higher on Ubuntu 17.04 and higher.  For more information, see: <a href="https://github.com/caffe2/caffe2/issues/1633" target="_blank" rel="noopener">here</a>.<br>You might need to export some required environment variables here. Normally setup.py sets good default env variables, but you’ll have to do that manually. The path: “$(dirname $(which conda))/../“ looks wierd but actually that`s what it is:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">export NO_MKLDNN=1</span><br><span class="line">export NO_SYSTEM_NCCL=1</span><br><span class="line">export CUDNN_LIB_DIR=&quot;/usr/local/cuda-10.0/lib64&quot;</span><br><span class="line">export CUDNN_INCLUDE_DIR=&quot;/usr/local/cuda-10.0/include&quot;</span><br><span class="line">export CMAKE_PREFIX_PATH=&quot;$(dirname $(which conda))/../&quot;</span><br></pre></td></tr></table></figure>

<p>Install:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python setup.py install     # build and install</span><br><span class="line">python setup.py clean --all # clean the build</span><br></pre></td></tr></table></figure>

<p>The previous step take tens of minutes, after successed, you will see message:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">-- Set runtime path of &quot;/home/sherk/Workspace/pytorch/torch/test/operator_gpu_test&quot; to &quot;$ORIGIN:/home/sherk/anaconda3/envs/torch-gpu/lib:/usr/local/cuda/lib64&quot;</span><br><span class="line">-- Set runtime path of &quot;/home/sherk/Workspace/pytorch/torch/test/math_gpu_test&quot; to &quot;$ORIGIN:/home/sherk/anaconda3/envs/torch-gpu/lib:/usr/local/cuda/lib64&quot;</span><br><span class="line">-- Set runtime path of &quot;/home/sherk/Workspace/pytorch/torch/test/mpi_gpu_test&quot; to &quot;$ORIGIN:/home/sherk/anaconda3/envs/torch-gpu/lib:/usr/local/cuda/lib64:/usr/lib/x86_64-linux-gnu/openmpi/lib&quot;</span><br><span class="line">-- Set runtime path of &quot;/home/sherk/Workspace/pytorch/torch/test/conv_op_cache_cudnn_test&quot; to &quot;$ORIGIN:/home/sherk/anaconda3/envs/torch-gpu/lib:/usr/local/cuda/lib64&quot;</span><br><span class="line">-- Set runtime path of &quot;/home/sherk/Workspace/pytorch/torch/test/batch_matmul_op_gpu_test&quot; to &quot;$ORIGIN:/home/sherk/anaconda3/envs/torch-gpu/lib:/usr/local/cuda/lib64&quot;</span><br><span class="line">-- Set runtime path of &quot;/home/sherk/Workspace/pytorch/torch/test/elementwise_op_gpu_test&quot; to &quot;$ORIGIN:/home/sherk/anaconda3/envs/torch-gpu/lib:/usr/local/cuda/lib64&quot;</span><br><span class="line">-- Set runtime path of &quot;/home/sherk/Workspace/pytorch/torch/test/generate_proposals_op_gpu_test&quot; to &quot;$ORIGIN:/home/sherk/anaconda3/envs/torch-gpu/lib:/usr/local/cuda/lib64&quot;</span><br><span class="line">-- Set runtime path of &quot;/home/sherk/Workspace/pytorch/torch/test/generate_proposals_op_util_nms_gpu_test&quot; to &quot;$ORIGIN:/home/sherk/anaconda3/envs/torch-gpu/lib:/usr/local/cuda/lib64&quot;</span><br><span class="line">-- Set runtime path of &quot;/home/sherk/Workspace/pytorch/torch/test/operator_fallback_gpu_test&quot; to &quot;$ORIGIN:/home/sherk/anaconda3/envs/torch-gpu/lib:/usr/local/cuda/lib64&quot;</span><br><span class="line">-- Set runtime path of &quot;/home/sherk/Workspace/pytorch/torch/test/reshape_op_gpu_test&quot; to &quot;$ORIGIN:/home/sherk/anaconda3/envs/torch-gpu/lib:/usr/local/cuda/lib64&quot;</span><br><span class="line">-- Set runtime path of &quot;/home/sherk/Workspace/pytorch/torch/test/roi_align_op_gpu_test&quot; to &quot;$ORIGIN:/home/sherk/anaconda3/envs/torch-gpu/lib:/usr/local/cuda/lib64&quot;</span><br><span class="line">-- Set runtime path of &quot;/home/sherk/Workspace/pytorch/torch/test/utility_ops_gpu_test&quot; to &quot;$ORIGIN:/home/sherk/anaconda3/envs/torch-gpu/lib:/usr/local/cuda/lib64&quot;</span><br><span class="line">-- Set runtime path of &quot;/home/sherk/Workspace/pytorch/torch/bin/test_jit&quot; to &quot;$ORIGIN:/home/sherk/anaconda3/envs/torch-gpu/lib:/usr/local/cuda/lib64&quot;</span><br><span class="line">-- Set runtime path of &quot;/home/sherk/Workspace/pytorch/torch/bin/test_api&quot; to &quot;$ORIGIN:/home/sherk/anaconda3/envs/torch-gpu/lib:/usr/local/cuda/lib64&quot;</span><br><span class="line">-- Set runtime path of &quot;/home/sherk/Workspace/pytorch/torch/lib/libcaffe2_detectron_ops_gpu.so&quot; to &quot;$ORIGIN:/home/sherk/anaconda3/envs/torch-gpu/lib:/usr/local/cuda/lib64&quot;</span><br><span class="line">-- Set runtime path of &quot;/home/sherk/Workspace/pytorch/torch/lib/libcaffe2_module_test_dynamic.so&quot; to &quot;$ORIGIN:/usr/local/cuda/lib64:/home/sherk/anaconda3/envs/torch-gpu/lib&quot;</span><br></pre></td></tr></table></figure>

<h1 id="Install-mkl"><a href="#Install-mkl" class="headerlink" title="Install mkl"></a>Install mkl</h1><p><strong>Note that the mkl is distinct from mkl-dnn</strong>: Download <strong>full</strong> mkl package from <a href="https://codeyarns.com/2019/05/14/how-to-install-intel-mkl/" target="_blank" rel="noopener">here</a> and:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ./install.sh</span><br></pre></td></tr></table></figure>

<p>Note that the mkl default installation dir is /opt/intel. You should take <code>sudo</code> to make the proper installation.</p>
<h1 id="Possibile-problem"><a href="#Possibile-problem" class="headerlink" title="Possibile problem"></a>Possibile problem</h1><p>All the environment configuration is quite fun, it takes a lot of effort, but when you have finished all the work, you may feel indeed released. The hardest part is configure system dependencies.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fatal error: caffe/proto/caffe.pb.h: No such file or directory #include &quot;caffe/protoc/caffe.pb.h&quot;</span><br></pre></td></tr></table></figure>

<p>you shall meet this problem using caffe: Source from <a href="https://github.com/muupan/dqn-in-the-caffe/issues/3" target="_blank" rel="noopener">here</a>. </p>
<h2 id="Highly-recommanded-installations"><a href="#Highly-recommanded-installations" class="headerlink" title="Highly recommanded installations"></a>Highly recommanded installations</h2><ul>
<li>vscode, vscode is a fucking saver;</li>
<li>chrome, it’s 21 century now, use some real fucking browser bro.</li>
</ul>

          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
  </section>

  


          </div>
          

        </div>
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">

          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Zepyhrus</p>
  <div class="site-description motion-element" itemprop="description"></div>
</div>
  <nav class="site-state motion-element">
      <div class="site-state-item site-state-posts">
        
          <a href="/archives/">
        
          <span class="site-state-item-count">8</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
    
  </nav>



        </div>
      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Zepyhrus</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.9.0</div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">Theme – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a> v7.3.0</div>

        








        
      </div>
    </footer>
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
      </div>

    

  </div>

  
  <script src="/lib/jquery/index.js?v=3.4.1"></script>
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

<script src="/js/utils.js?v=7.3.0"></script>
  <script src="/js/motion.js?v=7.3.0"></script>


  <script src="/js/schemes/muse.js?v=7.3.0"></script>



<script src="/js/next-boot.js?v=7.3.0"></script>




  




























  

  

  


  
</body>
</html>
